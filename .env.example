# ═══════════════════════════════════════════════════════════════════════════
# PUPPET MASTER - Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values
# ⚠️ Never commit .env to git!

# ───────────────────────────────────────────────────────────────────────────
# DATABASE
# ───────────────────────────────────────────────────────────────────────────
# SQLite database path (relative to app folder)
DATABASE_URL=./data/sqlite.db

# ───────────────────────────────────────────────────────────────────────────
# EMAIL (SMTP)
# ───────────────────────────────────────────────────────────────────────────
# Required if: features.contactEmailConfirmation = true
# Sends confirmation email to users who submit contact form
#
# Common SMTP providers:
# - Yandex: smtp.yandex.ru:465
# - Gmail: smtp.gmail.com:587 (requires App Password)
# - Mailgun: smtp.mailgun.org:587

SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=your-email@yandex.ru
SMTP_PASS=your-app-password
SMTP_FROM=Your Site Name <your-email@yandex.ru>

# ───────────────────────────────────────────────────────────────────────────
# TELEGRAM BOT
# ───────────────────────────────────────────────────────────────────────────
# Required if: features.contactTelegramNotify = true
# Sends notification to admin when contact form is submitted
#
# How to get credentials:
# 1. Message @BotFather on Telegram → /newbot → copy token
# 2. Message @userinfobot to get your personal chat ID
#    OR add bot to a group and get group chat ID

TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789

# ───────────────────────────────────────────────────────────────────────────
# S3 STORAGE (Optional)
# ───────────────────────────────────────────────────────────────────────────
# Required if: storage.provider = 's3' in puppet-master.config.ts
# Supports AWS S3, Cloudflare R2, MinIO, DigitalOcean Spaces, etc.
#
# For Cloudflare R2:
#   S3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
#   S3_PUBLIC_URL=https://pub-<id>.r2.dev or your custom domain
#
# For AWS S3:
#   S3_ENDPOINT=https://s3.<region>.amazonaws.com
#   S3_REGION=us-east-1

S3_ENDPOINT=https://your-endpoint.com
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key
S3_REGION=auto
S3_PUBLIC_URL=https://cdn.yoursite.com

# ───────────────────────────────────────────────────────────────────────────
# EXTERNAL API DATA SOURCE (Optional)
# ───────────────────────────────────────────────────────────────────────────
# Required if: dataSource.provider = 'api' or 'hybrid' in puppet-master.config.ts
# Allows using external REST API instead of local SQLite database
#
# Use cases:
# - Headless CMS integration (Strapi, Contentful, Sanity, etc.)
# - Microservices architecture
# - Multi-instance deployments with shared data
# - Cloud-native applications

# API base URL (without trailing slash)
API_BASE_URL=https://api.example.com/v1

# OAuth 2.0 Client Credentials (Recommended for production)
# Most secure method - tokens auto-refresh
API_CLIENT_ID=your-client-id
API_CLIENT_SECRET=your-client-secret
API_TOKEN_URL=https://auth.example.com/oauth/token

# Alternative: Static JWT token (simpler for development/testing)
# Requires manual rotation when expired
# API_JWT_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Alternative: API Key (basic auth - least secure)
# Only use for internal/trusted networks
# API_KEY=your-api-key-here

# Token refresh timing (seconds before expiry)
API_TOKEN_REFRESH_BUFFER=300

# ───────────────────────────────────────────────────────────────────────────
# REDIS CACHE (Optional - for multi-instance deployments)
# ───────────────────────────────────────────────────────────────────────────
# Required if: Running multiple app instances behind load balancer
# Enables shared cache across instances for API data
#
# For single-instance deployments, in-memory cache is sufficient

# REDIS_URL=redis://localhost:6379
# REDIS_PREFIX=pm-cache:
