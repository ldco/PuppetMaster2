/**
 * Data Table Component
 *
 * Styled tables for displaying and editing data.
 * Use for translations, settings, any tabular data.
 *
 * USAGE:
 *   <div class="card"><table class="data-table">...</table></div>
 *   OR
 *   <div class="data-table card"><table>...</table></div>
 */

/* Data table - works on <table> element OR wrapper div */
.data-table {
  width: 100%;
  border-collapse: collapse;
  /* Fixed layout prevents columns from expanding beyond container */
  table-layout: fixed;
}

/* When data-table is a wrapper div */
.data-table table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

/* Table cells - handle both patterns */
.data-table th,
.data-table td,
.data-table table th,
.data-table table td {
  padding: var(--space-3) var(--space-4);
  text-align: start;
  border-block-end: 1px solid var(--l-border);
}

/* Header cells */
.data-table th,
.data-table thead th,
.data-table table th {
  font-weight: var(--font-medium);
  color: var(--t-secondary);
  font-size: var(--text-sm);
  background: var(--l-bg-sunken);
}

/* Row hover */
.data-table tbody tr:hover,
.data-table table tbody tr:hover {
  background: var(--l-bg-sunken);
}

/* Column types */
.data-table .cell--key,
.data-table .key-cell {
  width: 35%;
}

.data-table .cell--key code,
.data-table .key-cell code {
  font-size: var(--text-sm);
  background: var(--l-bg-sunken);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-xs);
}

.data-table .cell--value,
.data-table .value-cell {
  cursor: pointer;
}

.data-table .cell--value:hover,
.data-table .value-cell:hover {
  background: var(--i-brand-subtle);
}

/* Actions column - right-aligned, fixed width */
.data-table .cell--actions,
.data-table .actions-cell,
.actions-col {
  width: 100px;
  text-align: end;
  white-space: nowrap;
}

/* Editable cell indicator */
.data-table .cell--editable {
  position: relative;
  cursor: pointer;
}

.data-table .cell--editable:hover::after {
  /* Unicode pencil character - renders consistently cross-platform */
  content: '\270E';
  position: absolute;
  inset-inline-end: var(--space-2);
  top: 50%;
  transform: translateY(-50%);
  color: var(--t-muted);
  font-size: var(--text-sm);
}

/* Empty state */
.data-table-empty {
  padding: var(--space-8);
  text-align: center;
  color: var(--t-muted);
}

/* ═══════════════════════════════════════════════════════════
 * RESPONSIVE: Card Layout on Mobile
 *
 * On phone screens, table rows become stacked cards.
 * Requires data-label attributes on <td> elements:
 *   <td data-label="Name">John Doe</td>
 * ═══════════════════════════════════════════════════════════ */
@media (--phone) {
  /* Hide table header on mobile */
  .data-table thead,
  .data-table table thead {
    display: none;
  }

  /* Make table a flex container for cards */
  .data-table tbody,
  .data-table table tbody {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: var(--space-3);
  }

  /* Each row becomes a card */
  .data-table tbody tr,
  .data-table table tbody tr {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--l-bg);
    border: 1px solid var(--l-border);
    border-radius: var(--radius-md);
  }

  .data-table tbody tr:hover,
  .data-table table tbody tr:hover {
    background: var(--l-bg); /* Keep same on hover */
  }

  /* Each cell becomes a row with label */
  .data-table td,
  .data-table table td {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-1) 0;
    border: none;
  }

  /* Long text (like translation values) should wrap and stay left-aligned */
  .data-table .cell--value,
  .data-table table .cell--value {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-1);
  }

  /* Label from data-label attribute */
  .data-table td::before,
  .data-table table td::before {
    content: attr(data-label);
    font-weight: var(--font-medium);
    color: var(--t-secondary);
    font-size: var(--text-sm);
    text-align: start;
    flex-shrink: 0;
  }

  /* Actions row - full width buttons */
  .data-table .actions-col {
    width: auto;
    justify-content: flex-end;
    padding-block-start: var(--space-2);
    border-block-start: 1px solid var(--l-border);
    margin-block-start: var(--space-1);
  }
}
