# /pm contribute â€” Export Fix/Feature as Contribution

**Purpose**: When working on a client project based on Puppet Master and you fix a bug or add a feature that should be contributed back to the PM framework, use this command to generate a contribution document.

This command is used in **client projects** (not the PM framework itself).

## Usage

```
/pm contribute                    # Interactive contribution export
/pm contribute "Fixed header scroll bug"   # With summary
```

---

## EXECUTE These Steps

### Step 1: Gather Information

Ask the user about the contribution:

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                         ğŸ“¤ PM CONTRIBUTION EXPORT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

You're about to export a fix/feature to contribute back to Puppet Master.

This will generate a .pm-contribution.md file that you can copy to the
PM framework repository for implementation.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### Step 2: Ask Contribution Type

Use AskUserQuestion:

```
What type of contribution is this?

â—‹ bugfix
  Fixed something that wasn't working correctly

â—‹ feature
  Added new functionality

â—‹ enhancement
  Improved existing functionality

â—‹ refactor
  Code improvement without changing behavior

â—‹ docs
  Documentation update
```

### Step 3: Ask Priority

```
What priority level?

â—‹ critical
  Security issue or major breakage

â—‹ high
  Important fix/feature

â—‹ medium
  Normal priority

â—‹ low
  Nice to have
```

### Step 4: Ask for Summary

```
Provide a one-line summary of the contribution:
```

(User types summary or it was provided as argument)

### Step 5: Ask for Problem Description

```
Describe the problem or need:
(What was broken? Why was this feature needed?)
```

### Step 6: Ask for Solution Description

```
Describe the solution:
(How did you solve it? Any design decisions?)
```

### Step 7: Ask Which Files Were Changed

```
Which files were changed? (Select all that apply)

List the files you modified, created, or deleted for this fix/feature.
You can provide paths or describe them.
```

Read the git diff or ask user to specify files:

```bash
git diff --name-only HEAD~1   # or appropriate range
git status --short
```

### Step 8: Identify Domains Affected

Based on files changed, determine domains:

- **Frontend**: `app/components/`, `app/pages/`, `app/layouts/`, `app/composables/`
- **Backend**: `server/api/`, `server/utils/`, `server/middleware/`
- **Database**: `server/database/schema.ts`, migrations
- **Styles**: `app/assets/css/`
- **Config**: `puppet-master.config.ts`, `nuxt.config.ts`
- **Types**: `app/types/`
- **Docs**: `docs/`, `*.md`

### Step 9: Read Changed Files

For each changed file, read and prepare:

**For modified files**: Generate diff
```bash
git diff HEAD~1 -- path/to/file
```

**For new files**: Include full content

**For deleted files**: Note the deletion and reason

### Step 10: Ask About Dependencies

```
Does this change require any new dependencies?

â—‹ No new dependencies
â—‹ Yes (specify packages)
```

### Step 11: Ask About Breaking Changes

```
Are there any breaking changes?

â—‹ No breaking changes
â—‹ Yes (describe what breaks)
```

### Step 12: Ask for Testing Instructions

```
How should this be tested?
(Provide step-by-step testing instructions)
```

### Step 13: Generate Contribution Document

Create `.pm-contribution.md` in project root:

```markdown
# PM Contribution

## Meta
- ID: PM-{YYYY}-{MMDD}-{XXX}
- Type: {bugfix|feature|enhancement|refactor|docs}
- Priority: {critical|high|medium|low}
- Created: {YYYY-MM-DD}
- Source: Client Project

## Summary
{one-line summary}

## Problem
{problem description}

## Solution
{solution description}

## Domains Affected
- [x] Frontend
- [ ] Backend
- [ ] Database
- [x] Styles
- [ ] Config
- [ ] Types
- [ ] Docs

## Files Changed

### Modified: `{path/to/file}`

**Purpose**: {why this file was changed}

```diff
{diff content}
```

### Created: `{path/to/new/file}`

**Purpose**: {why this file was created}

```{language}
{full file content}
```

### Deleted: `{path/to/deleted/file}`

**Reason**: {why this file was deleted}

## Dependencies

{none | list of new packages}

## Breaking Changes

{none | description of what breaks}

## Testing

1. {step one}
2. {step two}
3. {expected result}

## Notes

{any additional context}

---
*Generated by /pm contribute on {date}*
*Copy this file to PM framework and run /pm apply*
```

### Step 14: Display Summary

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                      âœ… CONTRIBUTION EXPORTED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Created: .pm-contribution.md

  Type:      {type}
  Priority:  {priority}
  Summary:   {summary}
  Files:     {count} changed

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Next Steps:
  1. Review .pm-contribution.md
  2. Copy to PM framework repository:
     cp .pm-contribution.md ~/puppet-master/
  3. In PM framework, run:
     /pm apply

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## Notes

- Generate unique ID using date + sequence
- Include enough context for PM maintainer to understand
- Diffs should be clean and focused on the change
- Don't include unrelated changes
- Testing instructions should be reproducible
